<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LinkNest</title>
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <!-- CSS -->
  <link rel="stylesheet" href="static/css/style.css">
</head>

<body>

  <div class="app-shell">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="brand">
          <div class="brand-icon">LN</div>
          <div class="brand-text">LinkNest</div>
        </div>
        <!-- Close sidebar (mobile) -->
        <button class="close-sidebar" id="closeSidebarBtn">âœ•</button>
      </div>

      <div class="nav-scroll">
        <div class="nav-group">
          <div class="nav-header">Library</div>
          <button class="nav-item active" onclick="setFilter('All')">
            <span>ğŸ“¦</span> All Items
          </button>
          <!-- Tree is injected here -->
          <div id="navTree" style="margin-top:4px"></div>
        </div>
      </div>

      <div class="sidebar-footer">
        <button class="btn btn-primary" style="width:100%" id="addBtn"><span>+</span> New Item</button>
        <button class="btn btn-ghost" style="width:100%; justify-content:flex-start" id="catAddBtn"><span>ğŸ“‚</span> New
          Category</button>
        <div style="height:1px; background:var(--border-sidebar); margin:4px 0"></div>
        <button class="btn btn-ghost" style="width:100%; justify-content:flex-start" id="dataBtn"><span>ğŸ’¾</span> Data &
          Backup</button>

        <div class="data-notice">
          âš ï¸ Data is stored in this browser (LocalStorage/IndexedDB). Export regularly to backup.
        </div>

        <!-- Mobile Only Controls -->
        <div class="mobile-only"
          style="gap:8px; margin-top: auto; padding-top:12px; border-top:1px solid var(--border-sidebar)">
          <button class="btn btn-ghost btn-icon" id="themeToggleMobile" title="Theme"
            style="color:var(--text-sidebar)">ğŸŒ—</button>
          <button class="btn btn-ghost btn-icon" id="viewModeBtnMobile" title="View"
            style="color:var(--text-sidebar)">âŠ</button>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="header">
        <div style="display:flex; align-items:center; flex:1; gap:12px">
          <button class="menu-toggle btn-icon" id="menuBtn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
          </button>
          <div class="search-container">
            <span class="search-icon">ğŸ”</span>
            <input type="text" class="search-input" id="globalSearch" placeholder="Search resources...">
          </div>
        </div>

        <div class="desktop-only" style="display:flex; gap:8px">
          <!-- No Notification Bell -->
          <button class="btn btn-ghost btn-icon" id="viewModeBtn" title="Toggle View">âŠ</button>
          <button class="btn btn-ghost btn-icon" id="themeToggle" title="Theme">ğŸŒ—</button>
        </div>
      </header>

      <!-- Workspace -->
      <div class="content-area">
        <div id="itemsGrid" class="items-grid">
          <!-- Cards -->
        </div>

        <div id="pagination" style="display:flex; justify-content:center; gap:8px; margin-top:32px"></div>
      </div>
    </main>
  </div>

  <!-- Modals -->
  <!-- 1. Add/Edit Item -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <button class="modal-close-x btn-close">âœ•</button>
      <h2 id="modalTitle" style="margin-top:0">Add New Item</h2>
      <form id="itemForm">
        <div class="form-group">
          <label class="form-label">Title</label>
          <input type="text" name="title" class="form-input" required placeholder="Project Name">
        </div>

        <div class="form-group">
          <label class="form-label">Category</label>
          <select id="categorySelect" name="category" class="form-input">
            <!-- Populated dynamically -->
          </select>
        </div>
        <!-- Reminders Removed -->

        <div class="form-group">
          <label class="form-label">URL</label>
          <input type="url" name="url" class="form-input" placeholder="https://...">
          <div style="font-size:11px; color:var(--text-muted); margin-top:4px">Required if no file uploaded.</div>
        </div>

        <div class="form-group">
          <label class="form-label">Attachment</label>
          <div
            style="border:2px dashed var(--border); border-radius:12px; padding:20px; text-align:center; cursor:pointer;"
            onclick="document.getElementById('fileUpload').click()">
            <span style="font-size:24px; opacity:0.5">ğŸ“‚</span>
            <div style="font-size:13px; color:var(--text-muted); margin-top:8px">Click to upload file or image</div>
            <input type="file" id="fileUpload" style="display:none">
          </div>
          <div id="filePreview" style="margin-top:8px"></div>
        </div>

        <div style="display:flex; justify-content:flex-end; gap:8px; margin-top:32px">
          <button type="button" class="btn btn-ghost btn-close">Cancel</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>

  <!-- 2. Add Category -->
  <div class="modal-overlay" id="categoryModal">
    <div class="modal" style="width:400px">
      <button class="modal-close-x btn-close">âœ•</button>
      <h2 style="margin-top:0">New Category</h2>
      <form id="categoryForm">
        <div class="form-group">
          <label class="form-label">Name</label>
          <input type="text" name="catName" class="form-input" required placeholder="e.g. Finance">
        </div>
        <div class="form-group">
          <label class="form-label">Icon (Emoji)</label>
          <input type="text" name="catIcon" class="form-input" placeholder="e.g. ğŸ’°">
        </div>
        <div style="display:flex; justify-content:flex-end; gap:8px; margin-top:24px">
          <button type="button" class="btn btn-ghost btn-close">Cancel</button>
          <button type="submit" class="btn btn-primary">Create Category</button>
        </div>
      </form>
    </div>
  </div>

  <!-- 3. Import/Export Data -->
  <div class="modal-overlay" id="importModal">
    <div class="modal">
      <button class="modal-close-x btn-close">âœ•</button>
      <h2 style="margin-top:0">Data & Backup</h2>
      <div style="margin-bottom:24px">
        <p style="font-size:14px; color:var(--text-muted)">Export your data to a JSON file to backup your links and
          categories.</p>
        <button class="btn btn-primary" id="btnExport">Export JSON</button>
      </div>
      <div style="border-top:1px solid var(--border); padding-top:24px">
        <h3 style="margin:0 0 16px 0; font-size:16px">Import</h3>
        <div class="form-group">
          <label class="form-label">Upload File</label>
          <input type="file" id="jsonFile" accept=".json" class="form-input">
        </div>
        <div class="form-group">
          <label class="form-label">Or Paste JSON</label>
          <textarea id="importText" class="form-textarea" placeholder='{"items": [], "categories": []}'></textarea>
        </div>
        <div style="display:flex; gap:8px; margin-top:16px; flex-wrap:wrap">
          <button class="btn btn-ghost" id="btnValidate">Validate</button>
          <button class="btn btn-ghost" id="btnMerge">Merge (Add New)</button>
          <button class="btn btn-danger" id="btnReplace">Replace (Overwrite All)</button>
        </div>
      </div>
      <div style="display:flex; justify-content:flex-end; margin-top:24px">
        <button class="btn btn-ghost btn-close">Close</button>
      </div>
    </div>
  </div>

  <script src="static/js/script.js"></script>
</body>

</html>